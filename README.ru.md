# JitsiBot - –ë–æ—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ —Å Jitsi Meet

JitsiBot - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ Go, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è–º Jitsi Meet –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∞—É–¥–∏–æ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é Chrome —á–µ—Ä–µ–∑ chromedp –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º Jitsi Meet –∏ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∞—É–¥–∏–æ–ø–æ—Ç–æ–∫–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üé§ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –∞—É–¥–∏–æ** –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏
- üîç **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/–≤—ã—Ö–æ–¥–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- üíæ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ –∫–æ–º–Ω–∞—Ç–∞–º
- üéØ **–§–æ—Ä–º–∞—Ç WebM** —Å –∫–æ–¥–µ–∫–æ–º Opus –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- üîß **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π** —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- üõ°Ô∏è **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è Chrome –≤ headless-—Ä–µ–∂–∏–º–µ** –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã


## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `chromedp` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ Chrome:
- –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä Jitsi Meet
- –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –í–Ω–µ–¥—Ä—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π JavaScript –¥–ª—è –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ

### 2. –ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ
–í–Ω–µ–¥—Ä–µ–Ω–Ω—ã–π JavaScript (`script.js`):
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç DOM –¥–ª—è audio-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `remoteAudio_`
- –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ Web Components –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç API `MediaRecorder` –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –∞—É–¥–∏–æ–ø–æ—Ç–æ–∫–æ–≤
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∞—É–¥–∏–æ-—á–∞–Ω–∫–∏ –≤ base64 –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Go-–±—ç–∫–µ–Ω–¥

### 3. –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
Go-–±—ç–∫–µ–Ω–¥:
- –ü–æ–ª—É—á–∞–µ—Ç –∞—É–¥–∏–æ–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ JavaScript binding
- –î–µ–∫–æ–¥–∏—Ä—É–µ—Ç base64 –∞—É–¥–∏–æ-—á–∞–Ω–∫–∏
- –û—Ä–≥–∞–Ω–∏–∑—É–µ—Ç —Ñ–∞–π–ª—ã –ø–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–æ–º–Ω–∞—Ç—ã
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç WebM –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Go** (–≤–µ—Ä—Å–∏—è 1.24.4 –∏–ª–∏ –Ω–æ–≤–µ–µ)
2. **Chrome/Chromium** –±—Ä–∞—É–∑–µ—Ä

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ Go-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `github.com/chromedp/chromedp` - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è Chrome
- `github.com/chromedp/cdproto` - Chrome DevTools Protocol

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
./jitsibot -room "my-conference-room" -botname "RecordingBot"
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `-room` | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ | `ssjitsi-test` |
| `-botname` | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è –±–æ—Ç–∞ –≤ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ | `SSJitsiBot` |
| `-datadir` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π | `../data/` |
| `-jitsi` | URL —Å–µ—Ä–≤–µ—Ä–∞ Jitsi | `https://meet.jit.si/` |
| `-username` | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | (–ø—É—Å—Ç–æ) |
| `-pass` | –ü–∞—Ä–æ–ª—å –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | (–ø—É—Å—Ç–æ) |
| `-help` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É | `false` |

### –ü—Ä–∏–º–µ—Ä—ã

**–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –ø—É–±–ª–∏—á–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ:**
```bash
./jitsibot -room "team-meeting" -botname "TeamRecorder" -datadir "./recordings"
```

**–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–π –ø–∞—Ä–æ–ª–µ–º –∫–æ–º–Ω–∞—Ç–µ:**
```bash
./jitsibot -room "private-meeting" -botname "SecureRecorder" -username "user" -pass "password"
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–µ—Ä–≤–µ—Ä Jitsi:**
```bash
./jitsibot -room "conference" -jitsi "https://my-jitsi-server.com/" -datadir "/data/recordings"
```

## –§–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

–ó–∞–ø–∏—Å–∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

```
data/
‚îî‚îÄ‚îÄ {bot-user-id}/
    ‚îú‚îÄ‚îÄ {participant-user-id}_{audio-element-id}.webm     # –ê—É–¥–∏–æ–∑–∞–ø–∏—Å–∏
    ‚îú‚îÄ‚îÄ {participant-user-id}_{audio-element-id}.json     # –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –Ω–∞—á–∞–ª–∞
    ‚îú‚îÄ‚îÄ {participant-user-id}.json                        # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞
    ‚îî‚îÄ‚îÄ room.json                                         # –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
```

### –¢–∏–ø—ã —Ñ–∞–π–ª–æ–≤

1. **`.webm`** - –ê—É–¥–∏–æ–∑–∞–ø–∏—Å–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ WebM —Å –∫–æ–¥–µ–∫–æ–º Opus
2. **`.json`** - –§–∞–π–ª—ã –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ:
   - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –Ω–∞—á–∞–ª–∞ (Unix –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –∏–º–µ–Ω–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–Ω–∞—Ç–µ

## JavaScript –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ Web Components

- **`ssbot-info`**: –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –±–æ—Ç–∞
- **`ssbot-audio`**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- **`observeElements()`**: –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è DOM –¥–ª—è audio-—ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **`handleElementAppeared()`**: –ù–∞—á–∏–Ω–∞–µ—Ç –∑–∞–ø–∏—Å—å –ø—Ä–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞
- **`handleElementDisappeared()`**: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞
- **`window.ssbot_writeSound`**: Binding –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—É–¥–∏–æ–¥–∞–Ω–Ω—ã—Ö –≤ Go-–±—ç–∫–µ–Ω–¥

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Chrome –Ω–µ –Ω–∞–π–¥–µ–Ω**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Chrome/Chromium —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2. **–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö
3. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–ø–∞—Ä–æ–ª—å –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
4. **–ê—É–¥–∏–æ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤—ã –º–æ–∂–µ—Ç–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –Ω–µ-headless —Ä–µ–∂–∏–º–µ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ) –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ JavaScript –æ—à–∏–±–∫–∏.